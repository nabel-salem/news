<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>Ù…ØªØ¨Ø±Ø¹ÙˆÙ† Ø¨Ø§Ù„Ø¯Ù…</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    * { box-sizing: border-box; }
    body {
      font-family: 'Arial', sans-serif;
      background-color: #f5f5f5;
      margin: 0;
      padding: 0;
    }
    header {
      background-color: #b30000;
      color: white;
      text-align: center;
      padding: 15px;
      font-size: 24px;
    }
    nav {
      display: flex;
      justify-content: space-around;
      background-color: #ffcccc;
      padding: 10px;
      flex-wrap: wrap;
    }
    nav button {
      padding: 10px 15px;
      border: none;
      border-radius: 8px;
      background-color: #b30000;
      color: white;
      cursor: pointer;
      margin: 5px;
    }
    .section {
      display: none;
      padding: 20px;
    }
    .active {
      display: block;
    }
    input, select, button {
      width: 100%;
      margin-top: 10px;
      padding: 10px;
      border-radius: 10px;
      border: 1px solid #ccc;
    }
    table {
      width: 100%;
      margin-top: 15px;
      border-collapse: collapse;
      background-color: white;
    }
    th, td {
      padding: 8px;
      border: 1px solid red;
      text-align: center;
    }
    thead tr {
      background-color: #b30000;
      color: white;
    }
    .filter-section {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    @media (min-width: 600px) {
      .filter-section {
        flex-direction: row;
      }
    }
    .popup-message, .password-popup {
      display: none;
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%) scale(0.9);
      background-color: #fff;
      padding: 20px 30px;
      border-radius: 15px;
      box-shadow: 0 0 20px rgba(0, 0, 0, 0.3);
      z-index: 1000;
      transition: all 0.3s ease;
      max-width: 90%;
      width: 350px;
      text-align: center;
      border: 3px solid red;
    }
    .popup-message.active, .password-popup.active {
      display: block;
      transform: translate(-50%, -50%) scale(1);
    }
    .popup-message button, .password-popup button {
      margin-top: 15px;
      background-color: #c00;
      color: white;
      border: none;
      padding: 8px 15px;
      border-radius: 8px;
      cursor: pointer;
    }
    .footer {
      text-align: center;
      margin-top: 20px;
      color: #888;
      padding: 10px;
    }
  </style>
</head>
<body>

<header>Ù…ØªØ¨Ø±Ø¹ÙˆÙ† Ø¨Ø§Ù„Ø¯Ù…... Ù‚Ø·Ø±Ø© Ø£Ù…Ù„ ØªÙ†Ù‚Ø° Ø­ÙŠØ§Ø©</header>
<header>Ù†Ø±Ø¬Ùˆ Ù…Ù† Ø§Ù„Ù…ØªØ¨Ø±Ø¹ÙŠÙ† ØªØ¹Ø¨Ø¦Ø© Ø¨ÙŠØ§Ù†Ø§ØªÙ‡Ù… Ø§Ù„ØµØ­ÙŠØ­Ø© ÙˆÙƒØ§Ù…Ù„Ø©...</header>

<nav>
  <button onclick="showSection('register')">ØªØ³Ø¬ÙŠÙ„ Ù…ØªØ¨Ø±Ø¹ Ø¬Ø¯ÙŠØ¯</button>
  <button onclick="showPasswordPopup()">ØªØ¹Ø¯ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª</button>
  <button onclick="showSection('search')">Ø¨Ø­Ø« Ø¹Ù† Ù…ØªØ¨Ø±Ø¹</button>
</nav>

<div id="register" class="section active">
  <h3>ØªØ³Ø¬ÙŠÙ„ ÙƒÙ…ØªØ¨Ø±Ø¹</h3>
  <input type="text" id="donorName" placeholder="Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„">
  <input type="text" id="donorPhone" placeholder="Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ">
  <input type="text" id="donorCity" placeholder="Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø©">
  <input type="text" id="donorArea" placeholder="Ø§Ù„Ù…Ø¯ÙŠØ±ÙŠØ©">
  <input type="text" id="donorLocation" placeholder="Ù…ÙƒØ§Ù† Ø§Ù„Ø³ÙƒÙ† Ø§Ù„Ø­Ø§Ù„ÙŠ">
  <label for="donorLastDate">Ø¢Ø®Ø± ØªØ§Ø±ÙŠØ® ØªØ¨Ø±Ø¹ (Ù…Ù‡Ù…)</label><input type="date" id="donorLastDate">
  <select id="donorBlood">
    <option selected>Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙØµØ§Ø¦Ù„</option>
    <option>+A</option><option>-A</option>
    <option>+B</option><option>-B</option>
    <option>+AB</option><option>-AB</option>
    <option>+O</option><option>-O</option>
  </select>
  <button onclick="addDonor()">ØªØ³Ø¬ÙŠÙ„</button>
</div>

<div id="edit" class="section">
  <h3>ØªØ¹Ø¯ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ØªØ¨Ø±Ø¹</h3>
  <input type="text" id="editName" placeholder="Ø§Ø¨Ø­Ø« Ø¨Ø§Ø³Ù… Ø§Ù„Ù…ØªØ¨Ø±Ø¹">
  <button onclick="editDonor()" style="background-color: #007bff;">Ø¨Ø­Ø« Ø¹Ù† Ù…ØªØ¨Ø±Ø¹</button>
  <div id="editSection" style="display: none;">
    <input type="text" id="editNewName" placeholder="Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„">
    <input type="text" id="editPhone" placeholder="Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ">
    <input type="text" id="editCity" placeholder="Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø©">
    <input type="text" id="editArea" placeholder="Ø§Ù„Ù…Ø¯ÙŠØ±ÙŠØ©">
    <input type="text" id="editLocation" placeholder="Ù…ÙƒØ§Ù† Ø§Ù„Ø³ÙƒÙ† ">
    <input type="date" id="editLastDate">
    <select id="editBlood">
      <option>+A</option><option>-A</option>
      <option>+B</option><option>-B</option>
      <option>+AB</option><option>-AB</option>
      <option>+O</option><option>-O</option>
    </select>
    <button onclick="saveEdit()" style="background-color: #28a745;">ØªØ¹Ø¯ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ØªØ¨Ø±Ø¹</button>
    <button onclick="deleteDonor()">Ø­Ø°Ù</button>
  </div>
</div>

<div id="search" class="section">
  <h3>Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ù…ØªØ¨Ø±Ø¹ÙŠÙ†</h3>
  <div class="filter-section">
    <select id="searchBlood" onchange="searchDonors()">
      <option selected>Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙØµØ§Ø¦Ù„</option>
      <option>+A</option><option>-A</option>
      <option>+B</option><option>-B</option>
      <option>+AB</option><option>-AB</option>
      <option>+O</option><option>-O</option>
    </select>
    <input type="text" id="searchQuery" oninput="searchDonors()" placeholder="Ø§Ø¨Ø­Ø« Ø¨Ø§Ù„Ø§Ø³Ù… Ø£Ùˆ Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ">
  </div>
  <table id="donorsTable">
    <thead>
      <tr>
        <th>Ø§Ù„Ø§Ø³Ù…</th><th>Ø§Ù„Ù‡Ø§ØªÙ</th><th>Ø§Ù„ÙØµÙŠÙ„Ø©</th><th>Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø©</th><th>Ø§Ù„Ù…Ø¯ÙŠØ±ÙŠØ©</th><th>Ø§Ù„Ø³ÙƒÙ†</th><th>Ø¢Ø®Ø± ØªØ¨Ø±Ø¹</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>
</div>

<div id="successPopup" class="popup-message"></div>
<div id="deleteConfirmPopup" class="popup-message">
  <p>Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ØªØ¨Ø±Ø¹ØŸ</p>
  <button onclick="confirmDelete(true)">Ù†Ø¹Ù…</button>
  <button onclick="confirmDelete(false)">Ù„Ø§</button>
</div>
<div id="passwordPopup" class="password-popup">
  <p>Ø¥Ø°Ø§ Ø£Ø±Ø¯Øª ØªØ¹Ø¯ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§ØªÙƒ ØªÙˆØ§ØµÙ„ Ø¹Ù„Ù‰ Ø§Ù„ÙˆØ§ØªØ³ Ø¹Ù„Ù‰ Ø§Ù„Ø±Ù‚Ù… Ø§Ù„ØªØ§Ù„ÙŠ:<br>00966511479262</p>
  <input type="password" id="passwordInput" placeholder="Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
  <button onclick="checkPassword()">Ø¯Ø®ÙˆÙ„</button>
  <button onclick="closePasswordPopup()">Ø¥ØºÙ„Ø§Ù‚</button>
</div>
<div class="footer">ØªØµÙ…ÙŠÙ…: Ù…/Ù†Ø¨ÙŠÙ„ Ø§Ù„ÙŠØ§ÙØ¹ÙŠ</div>

<script>
  const donorsData = [];
  let pendingDeleteIndex = null;

  function showSection(id) {
    document.querySelectorAll(".section").forEach(sec => sec.classList.remove("active"));
    document.getElementById(id).classList.add("active");
  }

  function showPasswordPopup() {
    document.getElementById("passwordPopup").classList.add("active");
  }

  function closePasswordPopup() {
    document.getElementById("passwordPopup").classList.remove("active");
  }

  function checkPassword() {
    const password = document.getElementById("passwordInput").value;
    if (password === "Na@7363Nabel") {
      closePasswordPopup();
      showSection('edit');
    } else {
      alert("ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©");
    }
  }

  function addDonor() {
    const name = document.getElementById("donorName").value;
    const phone = document.getElementById("donorPhone").value;
    const city = document.getElementById("donorCity").value;
    const area = document.getElementById("donorArea").value;
    const location = document.getElementById("donorLocation").value;
    const lastDate = document.getElementById("donorLastDate").value;
    const blood = document.getElementById("donorBlood").value;
    if (name && phone && city && area && location && lastDate && blood !== "Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙØµØ§Ø¦Ù„") {
      donorsData.push({ name, phone, city, area, location, lastDate, blood });
      showMessage("ØªÙ… Ø§Ù„ØªØ³Ø¬ÙŠÙ„ Ø¨Ù†Ø¬Ø§Ø­<br><small>Ø¬Ø²Ø§Ùƒ Ø§Ù„Ù„Ù‡ Ø®ÙŠØ±Ù‹Ø§ ÙˆØ¬Ø¹Ù„Ù‡Ø§ ÙÙŠ Ù…ÙŠØ²Ø§Ù† Ø­Ø³Ù†Ø§ØªÙƒ</small>");
      document.querySelectorAll("#register input").forEach(i => i.value = "");
      document.getElementById("donorBlood").selectedIndex = 0;
      renderSearchTable();
    } else {
      showMessage("ÙŠØ±Ø¬Ù‰ ØªØ¹Ø¨Ø¦Ø© Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„ ÙˆØ§Ø®ØªÙŠØ§Ø± Ø§Ù„ÙØµÙŠÙ„Ø©");
    }
  }

  function editDonor() {
    const name = document.getElementById("editName").value;
    const donor = donorsData.find(d => d.name.toLowerCase() === name.toLowerCase());
    if (donor) {
      document.getElementById("editSection").style.display = "block";
      document.getElementById("editNewName").value = donor.name;
      document.getElementById("editPhone").value = donor.phone;
      document.getElementById("editCity").value = donor.city;
      document.getElementById("editArea").value = donor.area;
      document.getElementById("editLocation").value = donor.location;
      document.getElementById("editLastDate").value = donor.lastDate;
      document.getElementById("editBlood").value = donor.blood;
    } else {
      showMessage("Ø§Ù„Ù…ØªØ¨Ø±Ø¹ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯");
      document.getElementById("editSection").style.display = "none";
    }
  }

  function saveEdit() {
    const name = document.getElementById("editName").value;
    const donor = donorsData.find(d => d.name.toLowerCase() === name.toLowerCase());
    if (donor) {
      donor.name = document.getElementById("editNewName").value;
      donor.phone = document.getElementById("editPhone").value;
      donor.city = document.getElementById("editCity").value;
      donor.area = document.getElementById("editArea").value;
      donor.location = document.getElementById("editLocation").value;
      donor.lastDate = document.getElementById("editLastDate").value;
      donor.blood = document.getElementById("editBlood").value;
      renderSearchTable();
      showMessage("ØªÙ… ØªØ¹Ø¯ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§ØªÙƒ Ø¨Ù†Ø¬Ø§Ø­");
      document.getElementById("editSection").style.display = "none";
    }
  }

  function deleteDonor() {
    const name = document.getElementById("editName").value;
    const index = donorsData.findIndex(d => d.name.toLowerCase() === name.toLowerCase());
    if (index !== -1) {
      pendingDeleteIndex = index;
      document.getElementById("deleteConfirmPopup").classList.add('active');
    }
  }

  function confirmDelete(confirmed) {
    if (confirmed && pendingDeleteIndex !== null) {
      donorsData.splice(pendingDeleteIndex, 1);
      renderSearchTable();
      showMessage("ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…ØªØ¨Ø±Ø¹ Ø¨Ù†Ø¬Ø§Ø­");
      document.getElementById("editSection").style.display = "none";
    }
    document.getElementById("deleteConfirmPopup").classList.remove("active");
    pendingDeleteIndex = null;
  }

  function searchDonors() {
    const blood = document.getElementById("searchBlood").value;
    const query = document.getElementById("searchQuery").value.toLowerCase();
    const results = donorsData.filter(d => {
      return (blood === "Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙØµØ§Ø¦Ù„" || blood === d.blood) &&
             (d.name.toLowerCase().includes(query) || d.phone.includes(query));
    });
    const tbody = document.querySelector("#donorsTable tbody");
    tbody.innerHTML = "";
    results.forEach(d => {
      const row = `<tr>
        <td data-label='Ø§Ù„Ø§Ø³Ù…'>${d.name}</td>
        <td data-label='Ø§Ù„Ù‡Ø§ØªÙ'>
          <a href="tel:${d.phone}" style="color: blue; text-decoration: none;">
            ğŸ“ Ø§ØªØµØ§Ù„
          </a><br>${d.phone}
        </td>
        <td data-label='Ø§Ù„ÙØµÙŠÙ„Ø©'>${d.blood}</td>
        <td data-label='Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø©'>${d.city}</td>
        <td data-label='Ø§Ù„Ù…Ø¯ÙŠØ±ÙŠØ©'>${d.area}</td>
        <td data-label='Ø§Ù„Ø³ÙƒÙ†'>${d.location}</td>
        <td data-label='Ø¢Ø®Ø± ØªØ¨Ø±Ø¹'>${d.lastDate}</td>
      </tr>`;
      tbody.innerHTML += row;
    });
  }

  function showMessage(message) {
    const popup = document.getElementById("successPopup");
    popup.innerHTML = message;
    popup.classList.add("active");
    setTimeout(() => popup.classList.remove("active"), 4000);
  }

  function renderSearchTable() {
    const tbody = document.querySelector("#donorsTable tbody");
    tbody.innerHTML = "";
    donorsData.forEach(d => {
      const row = `<tr>
        <td data-label='Ø§Ù„Ø§Ø³Ù…'>${d.name}</td>
        <td data-label='Ø§Ù„Ù‡Ø§ØªÙ'>
          <a href="tel:${d.phone}" style="color: blue; text-decoration: none;">
            ğŸ“ Ø§ØªØµØ§Ù„
          </a><br>${d.phone}
        </td>
        <td data-label='Ø§Ù„ÙØµÙŠÙ„Ø©'>${d.blood}</td>
        <td data-label='Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø©'>${d.city}</td>
        <td data-label='Ø§Ù„Ù…Ø¯ÙŠØ±ÙŠØ©'>${d.area}</td>
        <td data-label='Ø§Ù„Ø³ÙƒÙ†'>${d.location}</td>
        <td data-label='Ø¢Ø®Ø± ØªØ¨Ø±Ø¹'>${d.lastDate}</td>
      </tr>`;
      tbody.innerHTML += row;
    });
  }
</script>

</body>
</html>
